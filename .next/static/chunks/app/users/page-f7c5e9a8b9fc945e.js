(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{7561:function(e,t,s){Promise.resolve().then(s.bind(s,7551))},7551:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var r=s(7437),a=s(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:i="",children:m,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:n?24*Number(l)/Number(r):l,className:d("lucide",i),...!m&&!c(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),x=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:n,...c}=s;return(0,a.createElement)(m,{ref:r,iconNode:t,className:d("lucide-".concat(l(i(e))),"lucide-".concat(e),n),...c})});return s.displayName=i(e),s},u=x("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=x("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),p=x("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),g=x("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),y=x("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function f(e){let{onSubmit:t,initialValues:s,buttonText:l="Save"}=e,[n,i]=(0,a.useState)({name:"",number:"",address:""}),[d,c]=(0,a.useState)(!1),[o,m]=(0,a.useState)({});(0,a.useEffect)(()=>{s&&i(s)},[s]);let x=()=>{let e={};return n.name.trim()?n.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",n.number.trim()?/^[0-9+\-\s()]+$/.test(n.number)||(e.number="Please enter a valid phone number"):e.number="Phone number is required",n.address.trim()?n.address.trim().length<10&&(e.address="Please enter a complete address"):e.address="Address is required",m(e),0===Object.keys(e).length},f=async e=>{if(e.preventDefault(),x()){c(!0);try{await t(n)}finally{c(!1)}}},b=e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:s})),o[t]&&m(e=>({...e,[t]:""}))};return(0,r.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("label",{htmlFor:"name",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(u,{className:"w-4 h-4 mr-2 text-gray-500"}),"Full Name"]}),(0,r.jsx)("input",{type:"text",name:"name",id:"name",value:n.name,onChange:b,placeholder:"Enter full name",className:"block w-full px-4 py-3 border rounded-lg shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 ".concat(o.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500")}),o.name&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o.name]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"number",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(h,{className:"w-4 h-4 mr-2 text-gray-500"}),"Phone Number"]}),(0,r.jsx)("input",{type:"tel",name:"number",id:"number",value:n.number,onChange:b,placeholder:"+92 300 1234567",className:"block w-full px-4 py-3 border rounded-lg shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 ".concat(o.number?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500")}),o.number&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o.number]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"address",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(p,{className:"w-4 h-4 mr-2 text-gray-500"}),"Address"]}),(0,r.jsx)("textarea",{name:"address",id:"address",rows:4,value:n.address,onChange:b,placeholder:"Enter complete address",className:"block w-full px-4 py-3 border rounded-lg shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 resize-none ".concat(o.address?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500")}),o.address&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o.address]})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200",children:(0,r.jsx)("button",{type:"submit",disabled:d,className:"inline-flex items-center px-6 py-3 text-sm font-medium text-white rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(d?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 hover:shadow-md"),children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{className:"w-4 h-4 mr-2 animate-spin"}),s?"Updating...":"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{className:"w-4 h-4 mr-2"}),l]})})})]})}function b(e){let{user:t,onClose:s}=e,[l,n]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[c,o]=(0,a.useState)(!1),[m,x]=(0,a.useState)({type:"credit",amount:"",description:""});(0,a.useEffect)(()=>{u()},[t._id]);let u=async()=>{try{d(!0);let e=await fetch("/api/users/".concat(t._id,"/accounts"));if(e.ok){let t=await e.json();n(t.accounts||[])}}catch(e){console.error("Failed to fetch accounts:",e)}finally{d(!1)}},h=async()=>{if(!m.amount||!m.description){alert("Please fill all fields");return}try{(await fetch("/api/users/".concat(t._id,"/accounts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:m.type,amount:parseFloat(m.amount),description:m.description})})).ok?(x({type:"credit",amount:"",description:""}),o(!1),u()):alert("Failed to add entry")}catch(e){console.error("Failed to add entry:",e),alert("Failed to add entry")}},p=()=>l.reduce((e,t)=>"credit"===t.type?e+t.amount:e-t.amount,0),g=e=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR"}).format(e),y=e=>new Date(e).toLocaleDateString("en-PK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-4 border-b flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"User Details"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",t._id]})]}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-medium text-blue-900",children:"Name"}),(0,r.jsx)("p",{className:"text-blue-700",children:t.name})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-medium text-green-900",children:"Phone Number"}),(0,r.jsx)("p",{className:"text-green-700",children:t.number})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-medium text-purple-900",children:"Address"}),(0,r.jsx)("p",{className:"text-purple-700",children:t.address})]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Account Balance"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Credit"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-green-600",children:g(l.filter(e=>"credit"===e.type).reduce((e,t)=>e+t.amount,0))})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Debit"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-red-600",children:g(l.filter(e=>"debit"===e.type).reduce((e,t)=>e+t.amount,0))})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Current Balance"}),(0,r.jsx)("p",{className:"text-xl font-bold ".concat(p()>=0?"text-green-600":"text-red-600"),children:g(p())})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Entries"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-blue-600",children:l.length})]})]})]})}),(0,r.jsx)("div",{className:"mb-6",children:c?(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-medium mb-3",children:"Add New Account Entry"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("select",{value:m.type,onChange:e=>x(t=>({...t,type:e.target.value})),className:"border border-gray-300 rounded px-3 py-2",children:[(0,r.jsx)("option",{value:"credit",children:"Credit (+)"}),(0,r.jsx)("option",{value:"debit",children:"Debit (-)"})]}),(0,r.jsx)("input",{type:"number",placeholder:"Amount",value:m.amount,onChange:e=>x(t=>({...t,amount:e.target.value})),className:"border border-gray-300 rounded px-3 py-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Description",value:m.description,onChange:e=>x(t=>({...t,description:e.target.value})),className:"border border-gray-300 rounded px-3 py-2"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:h,className:"bg-green-500 text-white px-3 py-2 rounded hover:bg-green-600 text-sm",children:"Add"}),(0,r.jsx)("button",{onClick:()=>{o(!1),x({type:"credit",amount:"",description:""})},className:"bg-gray-500 text-white px-3 py-2 rounded hover:bg-gray-600 text-sm",children:"Cancel"})]})]})]}):(0,r.jsx)("button",{onClick:()=>o(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add New Entry"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Account History"}),i?(0,r.jsx)("p",{className:"text-gray-500",children:"Loading accounts..."}):0===l.length?(0,r.jsx)("p",{className:"text-gray-500",children:"No account entries found"}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Running Balance"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((e,t)=>{let s=l.slice(0,t+1).reduce((e,t)=>"credit"===t.type?e+t.amount:e-t.amount,0);return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:y(e.createdAt)}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs rounded-full ".concat("credit"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"credit"===e.type?"Credit (+)":"Debit (-)"})}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium ".concat("credit"===e.type?"text-green-600":"text-red-600"),children:["credit"===e.type?"+":"-",g(e.amount)]}),(0,r.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900",children:e.description}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold ".concat(s>=0?"text-green-600":"text-red-600"),children:g(s)})]},e._id)})})]})})]})]})]})})}function j(e){let{users:t,onEdit:s,onDelete:l}=e,[n,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[o,m]=(0,a.useState)(!1),x=e=>{n===e?(l(e),i(null)):i(e)},u=async e=>{try{let t=await fetch("/api/users/".concat(e._id));if(t.ok){let e=await t.json();c(e.user),m(!0)}}catch(e){console.error("Failed to fetch user details:",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No users found"})}):t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.number}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.address}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,r.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-900",children:"View Details"}),(0,r.jsx)("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>x(e._id),className:"".concat(n===e._id?"text-red-600 hover:text-red-900":"text-gray-600 hover:text-gray-900"),children:n===e._id?"Confirm Delete":"Delete"})]})]},e._id))})]})}),o&&d&&(0,r.jsx)(b,{user:d,onClose:()=>{m(!1),c(null)}})]})}let N=x("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),v=x("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),w=x("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),k=x("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function C(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[o,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)("");(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{l(!0);let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let s=await e.json();t(s.users),i(null)}catch(e){i(e.message)}finally{l(!1)}},p=(0,a.useMemo)(()=>x?e.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.number.toLowerCase().includes(x.toLowerCase())||e.address.toLowerCase().includes(x.toLowerCase())):e,[e,x]),g=async e=>{try{if(l(!0),d&&d._id){let t=await fetch("/api/users/".concat(d._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update user")}c(null)}else{let t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create user")}}h(),i(null),m(!1)}catch(e){i(e.message)}finally{l(!1)}},y=async e=>{try{if(l(!0),!(await fetch("/api/users/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete user");h(),i(null)}catch(e){i(e.message)}finally{l(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(N,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Users Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your users and their account information"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:["Total Users: ",e.length]})]})})}),n&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:n})})]})}),o?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:d?"Edit User":"Create New User"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:d?"Update user information below":"Fill in the details to create a new user"})]}),(0,r.jsx)("button",{onClick:()=>{c(null),m(!1)},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200",children:"← Back to List"})]})}),(0,r.jsx)("div",{className:"px-6 py-6",children:(0,r.jsx)(f,{onSubmit:g,initialValues:d||void 0,buttonText:d?"Update User":"Create User"})})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsx)("div",{className:"flex-1 max-w-lg",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(v,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Search users by name, phone, or address...",value:x,onChange:e=>u(e.target.value),className:"block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),x&&(0,r.jsx)("button",{onClick:()=>{u("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,r.jsx)("svg",{className:"h-4 w-4 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[x&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full",children:[(0,r.jsx)(w,{className:"w-4 h-4 mr-1"}),p.length," of ",e.length," users"]}),(0,r.jsxs)("button",{onClick:()=>{c(null),m(!0)},className:"inline-flex items-center px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[(0,r.jsx)(k,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]})}),x&&(0,r.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:(0,r.jsx)("p",{className:"text-sm text-gray-700",children:0===p.length?(0,r.jsxs)(r.Fragment,{children:["No users found matching ",(0,r.jsxs)("span",{className:"font-semibold",children:['"',x,'"']})]}):(0,r.jsxs)(r.Fragment,{children:["Showing ",p.length," user",1!==p.length?"s":""," matching ",(0,r.jsxs)("span",{className:"font-semibold",children:['"',x,'"']})]})})}),(0,r.jsx)("div",{className:"overflow-hidden",children:s?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-300 border-t-blue-600"}),(0,r.jsx)("span",{className:"text-sm",children:"Loading users..."})]})}):0!==p.length||x?(0,r.jsx)(j,{users:p,onEdit:e=>{c(e),m(!0)},onDelete:y}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(N,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No users found"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Get started by creating your first user."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:()=>{c(null),m(!0)},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:[(0,r.jsx)(k,{className:"w-4 h-4 mr-2"}),"Add User"]})})]})})]})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7561)}),_N_E=e.O()}]);