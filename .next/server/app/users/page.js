(()=>{var e={};e.id=240,e.ids=[240],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},749:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(2252),t(1506),t(5866);var r=t(3191),a=t(8716),l=t(7922),n=t.n(l),i=t(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2252)),"D:\\Next Js\\user\\app\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"D:\\Next Js\\user\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Next Js\\user\\app\\users\\page.tsx"],x="/users/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6270:(e,s,t)=>{Promise.resolve().then(t.bind(t,4144))},3803:(e,s,t)=>{Promise.resolve().then(t.bind(t,9496))},3548:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},4144:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(326);t(4047);var a=t(434),l=t(5047);function n({children:e}){let s=(0,l.usePathname)();return r.jsx("html",{lang:"en",children:r.jsx("body",{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[r.jsx("nav",{className:"bg-white shadow-sm",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex justify-between h-16",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx(a.default,{href:"/",className:"text-lg font-bold text-indigo-600",children:"Next.js MongoDB App"})}),(0,r.jsxs)("div",{className:"ml-6 flex space-x-8",children:[r.jsx(a.default,{href:"/",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/"===s?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Home"}),r.jsx(a.default,{href:"/users",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/users"===s?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Users"})]})]})})})}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg p-6",children:e})})]})})})}},9496:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var r=t(326),a=t(7577);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()),i=e=>{let s=n(e);return s.charAt(0).toUpperCase()+s.slice(1)},d=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim(),c=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let x=(0,a.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:l="",children:n,iconNode:i,...x},m)=>(0,a.createElement)("svg",{ref:m,...o,width:s,height:s,stroke:e,strokeWidth:r?24*Number(t)/Number(s):t,className:d("lucide",l),...!n&&!c(x)&&{"aria-hidden":"true"},...x},[...i.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(n)?n:[n]])),m=(e,s)=>{let t=(0,a.forwardRef)(({className:t,...r},n)=>(0,a.createElement)(x,{ref:n,iconNode:s,className:d(`lucide-${l(i(e))}`,`lucide-${e}`,t),...r}));return t.displayName=i(e),t},u=m("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=m("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),p=m("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),g=m("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),y=m("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function b({onSubmit:e,initialValues:s,buttonText:t="Save"}){let[l,n]=(0,a.useState)({name:"",number:"",address:""}),[i,d]=(0,a.useState)(!1),[c,o]=(0,a.useState)({}),x=()=>{let e={};return l.name.trim()?l.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",l.number.trim()?/^[0-9+\-\s()]+$/.test(l.number)||(e.number="Please enter a valid phone number"):e.number="Phone number is required",l.address.trim()?l.address.trim().length<10&&(e.address="Please enter a complete address"):e.address="Address is required",o(e),0===Object.keys(e).length},m=async s=>{if(s.preventDefault(),x()){d(!0);try{await e(l)}finally{d(!1)}}},b=e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:t})),c[s]&&o(e=>({...e,[s]:""}))};return(0,r.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("label",{htmlFor:"name",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[r.jsx(u,{className:"w-4 h-4 mr-2 text-gray-500"}),"Full Name"]}),r.jsx("input",{type:"text",name:"name",id:"name",value:l.name,onChange:b,placeholder:"Enter full name",className:`block w-full px-4 py-3 border rounded-lg shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 ${c.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500"}`}),c.name&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),c.name]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"number",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[r.jsx(h,{className:"w-4 h-4 mr-2 text-gray-500"}),"Phone Number"]}),r.jsx("input",{type:"tel",name:"number",id:"number",value:l.number,onChange:b,placeholder:"+92 300 1234567",className:`block w-full px-4 py-3 border rounded-lg shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 ${c.number?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500"}`}),c.number&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),c.number]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"address",className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[r.jsx(p,{className:"w-4 h-4 mr-2 text-gray-500"}),"Address"]}),r.jsx("textarea",{name:"address",id:"address",rows:4,value:l.address,onChange:b,placeholder:"Enter complete address",className:`block w-full px-4 py-3 border rounded-lg shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 resize-none ${c.address?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500"}`}),c.address&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),c.address]})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200",children:r.jsx("button",{type:"submit",disabled:i,className:`inline-flex items-center px-6 py-3 text-sm font-medium text-white rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ${i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 hover:shadow-md"}`,children:i?(0,r.jsxs)(r.Fragment,{children:[r.jsx(g,{className:"w-4 h-4 mr-2 animate-spin"}),s?"Updating...":"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(y,{className:"w-4 h-4 mr-2"}),t]})})})]})}function f({user:e,onClose:s}){let[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1),[o,x]=(0,a.useState)({type:"credit",amount:"",description:""}),m=async()=>{try{i(!0);let s=await fetch(`/api/users/${e._id}/accounts`);if(s.ok){let e=await s.json();l(e.accounts||[])}}catch(e){console.error("Failed to fetch accounts:",e)}finally{i(!1)}},u=async()=>{if(!o.amount||!o.description){alert("Please fill all fields");return}try{(await fetch(`/api/users/${e._id}/accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:o.type,amount:parseFloat(o.amount),description:o.description})})).ok?(x({type:"credit",amount:"",description:""}),c(!1),m()):alert("Failed to add entry")}catch(e){console.error("Failed to add entry:",e),alert("Failed to add entry")}},h=()=>t.reduce((e,s)=>"credit"===s.type?e+s.amount:e-s.amount,0),p=e=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR"}).format(e),g=e=>new Date(e).toLocaleDateString("en-PK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-4 border-b flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Details"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e._id]})]}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-900",children:"Name"}),r.jsx("p",{className:"text-blue-700",children:e.name})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-green-900",children:"Phone Number"}),r.jsx("p",{className:"text-green-700",children:e.number})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-purple-900",children:"Address"}),r.jsx("p",{className:"text-purple-700",children:e.address})]})]}),r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Account Balance"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Credit"}),r.jsx("p",{className:"text-lg font-semibold text-green-600",children:p(t.filter(e=>"credit"===e.type).reduce((e,s)=>e+s.amount,0))})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Debit"}),r.jsx("p",{className:"text-lg font-semibold text-red-600",children:p(t.filter(e=>"debit"===e.type).reduce((e,s)=>e+s.amount,0))})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),r.jsx("p",{className:`text-xl font-bold ${h()>=0?"text-green-600":"text-red-600"}`,children:p(h())})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Entries"}),r.jsx("p",{className:"text-lg font-semibold text-blue-600",children:t.length})]})]})]})}),r.jsx("div",{className:"mb-6",children:d?(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Add New Account Entry"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("select",{value:o.type,onChange:e=>x(s=>({...s,type:e.target.value})),className:"border border-gray-300 rounded px-3 py-2",children:[r.jsx("option",{value:"credit",children:"Credit (+)"}),r.jsx("option",{value:"debit",children:"Debit (-)"})]}),r.jsx("input",{type:"number",placeholder:"Amount",value:o.amount,onChange:e=>x(s=>({...s,amount:e.target.value})),className:"border border-gray-300 rounded px-3 py-2"}),r.jsx("input",{type:"text",placeholder:"Description",value:o.description,onChange:e=>x(s=>({...s,description:e.target.value})),className:"border border-gray-300 rounded px-3 py-2"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:u,className:"bg-green-500 text-white px-3 py-2 rounded hover:bg-green-600 text-sm",children:"Add"}),r.jsx("button",{onClick:()=>{c(!1),x({type:"credit",amount:"",description:""})},className:"bg-gray-500 text-white px-3 py-2 rounded hover:bg-gray-600 text-sm",children:"Cancel"})]})]})]}):r.jsx("button",{onClick:()=>c(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add New Entry"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Account History"}),n?r.jsx("p",{className:"text-gray-500",children:"Loading accounts..."}):0===t.length?r.jsx("p",{className:"text-gray-500",children:"No account entries found"}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Running Balance"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,s)=>{let a=t.slice(0,s+1).reduce((e,s)=>"credit"===s.type?e+s.amount:e-s.amount,0);return(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:g(e.createdAt)}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${"credit"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:"credit"===e.type?"Credit (+)":"Debit (-)"})}),(0,r.jsxs)("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-medium ${"credit"===e.type?"text-green-600":"text-red-600"}`,children:["credit"===e.type?"+":"-",p(e.amount)]}),r.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:e.description}),r.jsx("td",{className:`px-4 py-4 whitespace-nowrap text-sm font-semibold ${a>=0?"text-green-600":"text-red-600"}`,children:p(a)})]},e._id)})})]})})]})]})]})})}function j({users:e,onEdit:s,onDelete:t}){let[l,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),x=e=>{l===e?(t(e),n(null)):n(e)},m=async e=>{try{let s=await fetch(`/api/users/${e._id}`);if(s.ok){let e=await s.json();d(e.user),o(!0)}}catch(e){console.error("Failed to fetch user details:",e)}};return(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto mt-6",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No users found"})}):e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.number}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.address}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[r.jsx("button",{onClick:()=>m(e),className:"text-blue-600 hover:text-blue-900",children:"View Details"}),r.jsx("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),r.jsx("button",{onClick:()=>x(e._id),className:`${l===e._id?"text-red-600 hover:text-red-900":"text-gray-600 hover:text-gray-900"}`,children:l===e._id?"Confirm Delete":"Delete"})]})]},e._id))})]})}),c&&i&&r.jsx(f,{user:i,onClose:()=>{o(!1),d(null)}})]})}let N=m("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),v=m("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),w=m("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),k=m("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function C(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[o,x]=(0,a.useState)(!1),[m,u]=(0,a.useState)(""),h=async()=>{try{l(!0);let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let t=await e.json();s(t.users),i(null)}catch(e){i(e.message)}finally{l(!1)}},p=(0,a.useMemo)(()=>m?e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.number.toLowerCase().includes(m.toLowerCase())||e.address.toLowerCase().includes(m.toLowerCase())):e,[e,m]),g=async e=>{try{if(l(!0),d&&d._id){let s=await fetch(`/api/users/${d._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to update user")}c(null)}else{let s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create user")}}h(),i(null),x(!1)}catch(e){i(e.message)}finally{l(!1)}},y=async e=>{try{if(l(!0),!(await fetch(`/api/users/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete user");h(),i(null)}catch(e){i(e.message)}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(N,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Users Management"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage your users and their account information"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:["Total Users: ",e.length]})]})})}),n&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-800",children:n})})]})}),o?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d?"Edit User":"Create New User"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:d?"Update user information below":"Fill in the details to create a new user"})]}),r.jsx("button",{onClick:()=>{c(null),x(!1)},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors duration-200",children:"â† Back to List"})]})}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(b,{onSubmit:g,initialValues:d||void 0,buttonText:d?"Update User":"Create User"})})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsx("div",{className:"flex-1 max-w-lg",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(v,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",placeholder:"Search users by name, phone, or address...",value:m,onChange:e=>u(e.target.value),className:"block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),m&&r.jsx("button",{onClick:()=>{u("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx("svg",{className:"h-4 w-4 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[m&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full",children:[r.jsx(w,{className:"w-4 h-4 mr-1"}),p.length," of ",e.length," users"]}),(0,r.jsxs)("button",{onClick:()=>{c(null),x(!0)},className:"inline-flex items-center px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[r.jsx(k,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]})}),m&&r.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:r.jsx("p",{className:"text-sm text-gray-700",children:0===p.length?(0,r.jsxs)(r.Fragment,{children:["No users found matching ",(0,r.jsxs)("span",{className:"font-semibold",children:['"',m,'"']})]}):(0,r.jsxs)(r.Fragment,{children:["Showing ",p.length," user",1!==p.length?"s":""," matching ",(0,r.jsxs)("span",{className:"font-semibold",children:['"',m,'"']})]})})}),r.jsx("div",{className:"overflow-hidden",children:t?r.jsx("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-300 border-t-blue-600"}),r.jsx("span",{className:"text-sm",children:"Loading users..."})]})}):0!==p.length||m?r.jsx(j,{users:p,onEdit:e=>{c(e),x(!0)},onDelete:y}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No users found"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Get started by creating your first user."}),r.jsx("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:()=>{c(null),x(!0)},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:[r.jsx(k,{className:"w-4 h-4 mr-2"}),"Add User"]})})]})})]})]})})}},1506:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`D:\Next Js\user\app\layout.tsx#default`)},2252:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`D:\Next Js\user\app\users\page.tsx#default`)},4047:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,982],()=>t(749));module.exports=r})();